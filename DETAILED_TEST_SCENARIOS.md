# GhoBash Salesforce - Detailed Test Scenarios by User Story

This document provides comprehensive test scenarios for each completed user story, following the structure: BRN, Module/Functional Area, Sub-Module, Company, CR, USR No, Title, User, Description, User Acceptance Criteria, Solutions, Sprint, Developer Name, Test Scenario, and Test Steps.

---

## Sprint 1 - Test Scenarios

| BRN | Module/Functional Area | Sub-Module | Company | CR | USR No | Title | User | Description | User Acceptance Criteria | Solutions | Sprint | Developer Name | Test Scenario | Test Steps |
|-----|------------------------|------------|---------|----|----|-------|------|-------------|-------------------------|-----------|--------|---------------|---------------|------------|
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#005 | Manual Lead Creation | Sales Coordinator | As a Sales Coordinator, I want to manually create a new lead record in Salesforce when I receive inquiries from various sources (e.g., walk-ins, phone calls, trade events) so that I can capture all the necessary details and initiate the sales process. | The system should allow a Sales Coordinator to create a new lead record directly in Salesforce with mandatory fields: Company Name, Lead Source, Lead Type, Lead Sub-type, Primary Contact Name, Primary Contact Phone, Primary Contact Email, Scope of Work, Bid Bond Required, Business Unit, Existing Customer, Account, Vertical Head, Customer Classification, and Bid Submission Date. | Create record types for all companies under Energy (GCGE,EEIC). Create fields and setup page layouts. Make mentioned fields mandatory on page layouts. Utilize dynamic forms for BU-based visibility. Configure Lead to Opportunity mapping. | Sprint 1 | Prajwal | **TS-001:** Validate mandatory field enforcement on new lead creation | **Steps:**<br>1. Login to Salesforce as Sales Coordinator user<br>2. Navigate to Leads tab<br>3. Click "New" button<br>4. Select Record Type (EEIC or GCGE)<br>5. Click Continue<br>6. Leave Company Name field blank<br>7. Attempt to click Save<br>8. Observe validation error message<br>9. Fill Company Name: "Test Corp"<br>10. Leave Primary Contact Email blank<br>11. Attempt to save<br>12. Fill all mandatory fields<br>13. Save successfully<br>**Expected:** System should prevent saving and show specific error for each missing mandatory field. Success after all fields filled. |
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#005 | Manual Lead Creation | Sales Coordinator | (cont.) | (cont.) | (cont.) | Sprint 1 | Prajwal | **TS-002:** Verify dynamic form behavior for Existing Customer field | **Steps:**<br>1. Create new Lead<br>2. Select Business Unit from picklist<br>3. Set Existing Customer = "No"<br>4. Observe that Account lookup field is NOT visible<br>5. Change Existing Customer to "Yes"<br>6. Observe Account lookup field appears and shows as required (red asterisk)<br>7. Try to save without selecting account<br>8. Verify validation error<br>9. Select an existing account from lookup<br>10. Save successfully<br>**Expected:** Account lookup should be conditionally visible and mandatory only when Existing Customer = "Yes". Dynamic forms should control visibility. |
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#006 | Manual Lead Creation - Lead Source | Sales Coordinator | As a sales coordinator, I want to select a lead source from a predefined list so that I can quickly and accurately categorize where the lead came from. | Lead Source field must be a dropdown picklist. List must include options such as "Walk-in", "Referral", and "Trade Event". User must not be able to manually enter a value not in the predefined list. | Source field is Restricted picklist, add the mentioned values | Sprint 1 | Prajwal | **TS-003:** Validate Lead Source is restricted picklist preventing manual entry | **Steps:**<br>1. Create new Lead<br>2. Click on Lead Source field<br>3. Verify dropdown appears with predefined values: Walk-in, Phone Call, Webform, Campaign, Referral, Trade Event<br>4. Try to type a custom value like "Direct Visit" directly<br>5. Observe that manual text entry is not possible<br>6. Select "Walk-in" from dropdown<br>7. Save record<br>8. Verify Lead Source = "Walk-in" on saved record<br>**Expected:** Lead Source should be restricted picklist. Users cannot type custom values. Only selection from predefined list allowed. |
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#007 | Document Attachment | Sales Coordinator | As a sales coordinator, I want to attach documents like scope of work and site pictures to a lead record so that I can keep all relevant information organized and easily accessible. | There must be a clear and intuitive way to add attachments. Successfully uploaded attachments must be visible and accessible. System should support common file types: PDFs, Word documents (DOCX), Excel spreadsheets (XLSX), and common image files (JPG, PNG). | Use the generic lwc covered in other story | Sprint 1 | Soniya | **TS-004:** Upload Scope of Work document to Lead with document type tagging | **Steps:**<br>1. Create and save a Lead<br>2. Navigate to "Upload Documents" component on lead record page<br>3. Observe document type dropdown and file upload section<br>4. Click Upload button (if modal)<br>5. Select Document Type = "Scope of Work"<br>6. Click Choose File<br>7. Select a PDF file (<5MB)<br>8. Click Upload/Done<br>9. Wait for success message<br>10. Navigate to Files related list or documents datatable<br>11. Verify uploaded file appears with Document Type = "Scope of Work"<br>12. Click preview/download to verify file<br>**Expected:** Document should upload successfully with proper type tag. Should be visible in Files section. Preview should work. |
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#007 | Document Attachment | Sales Coordinator | (cont.) | (cont.) | (cont.) | Sprint 1 | Soniya | **TS-005:** Upload multiple document types and verify file type support | **Steps:**<br>1. Open lead record<br>2. Upload Document Type = "Scope of Work", file = test.pdf<br>3. Upload Document Type = "Site Pictures", file = site.jpg<br>4. Upload Document Type = "Technical Spec", file = spec.docx<br>5. Upload Document Type = "Quotation", file = quote.xlsx<br>6. Verify all uploads successful<br>7. Check each file in Files section<br>8. Verify document type tagged correctly on each<br>**Expected:** Should support PDF, DOCX, XLSX, JPG, PNG files. All should upload with correct document type tags. |
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#008 | Vertical Head Auto-fill | Sales Coordinator | As a sales coordinator, I want the Vertical Head field to be automatically filled in based on the Business Unit I select so that I don't have to manually search for and assign the correct person. | Vertical Head field should automatically populate when Business Unit is selected. Auto-populated value must be correct according to predefined mapping rules. Vertical Head field should not be editable by the user. | Create Vertical head lookup field. Create custom object to map BU to vertical head user, use mapping via flow or trigger | Sprint 1 | Prajwal | **TS-006:** Auto-populate Vertical Head based on Business Unit selection | **Steps:**<br>1. Ensure Business Unit Mapping Rule exists: BU = "BU-E3 : Engineering and Contracting Supplies (Trading)", Vertical_Head__c = User "Ramiz", Is_Active__c = TRUE<br>2. Create new Lead<br>3. Set Business Unit = "BU-E3 : Engineering and Contracting Supplies (Trading)"<br>4. Save the lead<br>5. Immediately observe Vertical Head field<br>6. Verify Vertical Head = "Ramiz" (or configured user)<br>7. Try to edit Vertical Head field<br>8. Observe field is read-only<br>**Expected:** Vertical Head should auto-populate based on Business Unit Mapping Rule. Field should be non-editable. Trigger/Flow should handle assignment. |
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#008 | Vertical Head Auto-fill | Sales Coordinator | (cont.) | (cont.) | (cont.) | Sprint 1 | Prajwal | **TS-007:** Verify Vertical Head updates when Business Unit changes | **Steps:**<br>1. Create lead with BU = "Automation" (VH = User A)<br>2. Save and verify VH = User A<br>3. Edit lead<br>4. Change BU to "Water Technology" (VH = User B per mapping)<br>5. Save<br>6. Verify VH updates to User B<br>7. Check field history tracking<br>**Expected:** Vertical Head should dynamically update based on BU change. History should track the change. |
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#009 | Account Lookup for Existing Customer | Sales Coordinator | As a sales coordinator, I want to search for and link to an existing customer's account when a new lead is from a company we already do business with, so I don't create a duplicate account. | Account lookup field enabled and visible only when "Yes" is selected for Existing Customer. When "No" selected, field must not be visible. Lookup must allow search for and select existing Account. | If Existing Customer (mandatory) is Yes, make Account lookup mandatory. Use validation rule for VAT/TRN when Existing Customer = No. Write Apex logic on conversion. | Sprint 1 | Prajwal | **TS-008:** Validate Account lookup visibility and mandatory behavior | **Steps:**<br>1. Create new lead<br>2. Set Existing Customer = "No"<br>3. Verify Account lookup field is hidden<br>4. Try to save without Account<br>5. Success (no validation for Account)<br>6. Edit lead<br>7. Change Existing Customer = "Yes"<br>8. Verify Account lookup appears and shows as mandatory<br>9. Try to save without selecting Account<br>10. Observe validation error<br>11. Click Account lookup<br>12. Search for "Acme Corp"<br>13. Select account from results<br>14. Save successfully<br>**Expected:** Dynamic forms control visibility. Validation enforces mandatory when Existing Customer = Yes. |
| BRN#003 | Lead Management | Lead Creation_Manual | EEIC & GCGE- All BUs | No | USR#010 | Lead Data Upload | Admin | As an admin, I want to use a data loader to upload multiple leads from a campaign or legacy list at once, so that I can save time and avoid manual data entry for each lead. | System should provide Excel-based data loader template. System should allow successful upload of multiple leads using this template. | Lead data upload via import wizard. Provide access for bulk upload and enable upload button on Lead page. | Sprint 1 | Soniya | **TS-009:** Bulk lead upload via Data Import Wizard | **Steps:**<br>1. Login as Admin or user with bulk upload permission<br>2. Navigate to Leads tab<br>3. Click on gear icon or Setup<br>4. Select "Import Data" or use Data Import Wizard<br>5. Choose Lead object<br>6. Prepare CSV with columns: Company, LastName, Email, Phone, Business_Unit__c, Status, etc.<br>7. Upload CSV file<br>8. Map fields<br>9. Start import<br>10. Check import status<br>11. Verify leads created<br>12. Verify field values correct<br>**Expected:** Import wizard should be accessible. Multiple leads should import successfully. All field mappings should work. Errors should be reported clearly. |
| BRN#007 | Lead Management | Lead Assignment - Manual | EEIC & GCGE- All BUs | No | USR#019 | Manual Lead Ownership Assignment | Bid Manager | As a Bid Manager, I want to have the ability to manually assign lead ownership to appropriate team members based on internal discussions, workload, or qualification criteria. | Bid Managers should be able to manually assign lead ownership from within Lead record. System should support manual reassignment without disrupting workflow. | Grant Transfer Lead permission to the profile. | Sprint 1 | Soniya | **TS-010:** Manual lead ownership transfer by Bid Manager | **Steps:**<br>1. Login as Bid Manager with Transfer Lead permission<br>2. Navigate to Leads<br>3. Open a lead record<br>4. Click "Change Owner" button<br>5. Search for and select target user/queue<br>6. Click "Transfer Ownership" or "Save"<br>7. Verify success message<br>8. Refresh lead record<br>9. Verify Owner field updated<br>10. Check Lead History for ownership change entry<br>11. Login as user without Transfer permission<br>12. Verify Change Owner button not available<br>**Expected:** Bid Manager can transfer ownership. History tracks change. Users without permission cannot transfer. |
| BRN#007 | Lead Management | Lead Assignment - Manual | EEIC & GCGE- All BUs | No | USR#020 | Lead Assignment Notification | Sales Coordinator | As a Sales Coordinator, I want the system to notify users when a lead is assigned to them—whether they are named as the primary owner or part of a queue—so no one misses important ownership changes. | When lead assigned to user, send Salesforce bell notification. If part of queue, send notification to all queue members. Notification message: "You've been added as a Collaborator on Lead [Lead ID]." | Write flow to send bell notifications to owner on ownership transfer and to queue users. Add IsActive check before sending. | Sprint 1 | Soniya | **TS-011:** Bell notification sent to new owner on lead assignment | **Steps:**<br>1. Login as User A<br>2. Create lead or open existing lead<br>3. Transfer ownership to User B<br>4. Logout<br>5. Login as User B<br>6. Click bell icon (notifications)<br>7. Verify notification appears<br>8. Check notification text: "You've been added as a Collaborator on Lead [Lead ID]"<br>9. Click notification<br>10. Verify navigation to lead record<br>11. Check timestamp on notification<br>**Expected:** Bell notification should be sent immediately. Message should contain lead ID. Clicking notification should navigate to lead. |
| BRN#007 | Lead Management | Lead Assignment - Manual | EEIC & GCGE- All BUs | No | USR#020 | Lead Assignment Notification | Sales Coordinator | (cont.) | (cont.) | (cont.) | Sprint 1 | Soniya | **TS-012:** Bell notification sent to all active queue members | **Steps:**<br>1. Create queue with 3 active users<br>2. Assign lead to the queue<br>3. Login as each queue member<br>4. Check notifications<br>5. Verify all active users received notification<br>6. Add inactive user to queue<br>7. Assign another lead to queue<br>8. Verify inactive user does NOT receive notification<br>**Expected:** Only active users in queue should receive bell notifications. Flow should check IsActive before sending. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#021 | Lead Status: New | Sales Coordinator | As a sales coordinator, I want new leads created from emails, webforms, or manual entry to automatically be marked as "New" so that I can easily identify leads that need to be reviewed for the first time. | When lead record is saved (via email, webform, or manual entry), Status field should be set to "New" by the system by default. | Configure lead status with mentioned picklist values. New - email, webform, and manual (Default value). | Sprint 1 | Prajwal | **TS-013:** Verify default Status = "New" on lead creation | **Steps:**<br>1. Create new lead manually<br>2. Do not set Status field<br>3. Save lead<br>4. Open lead record<br>5. Verify Status = "New"<br>6. Create lead via web-to-lead form (if configured)<br>7. Verify Status = "New"<br>8. Create lead via email-to-lead (if configured)<br>9. Verify Status = "New"<br>**Expected:** Status should default to "New" for all creation methods. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#022 | Assigned | Sales Coordinator | As a sales coordinator, I want when the new leads is automatically or manually assigned to the right person or team it can be marked as "Assigned" so that they can be worked on promptly. | When lead's Status is "New" and owner is changed, Status should auto-update to "Assigned". Can also be set manually. | Assigned - when transferred to user (use flow on owner change to update status to assigned) | Sprint 1 | Prajwal | **TS-014:** Auto-update Status to Assigned on owner change | **Steps:**<br>1. Create lead with Status = "New", Owner = User A<br>2. Save<br>3. Transfer ownership to User B<br>4. Observe Status field<br>5. Verify Status auto-updates to "Assigned"<br>6. Check if flow executed in Debug Logs<br>7. Verify timestamp updated<br>**Expected:** Flow should detect owner change and update Status to "Assigned" automatically. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#023 | Work In Progress | Sales Coordinator | As a sales coordinator, I want to be able to change a lead's status to "Work In Progress" when I begin the qualification process so that my team knows it's being actively managed. | When lead's Status is "Assigned" and user takes action, user should be able to mark status as "Work in Progress" manually. | Covered above | Sprint 1 | Prajwal | **TS-015:** Manually set Status to Work In Progress | **Steps:**<br>1. Open lead with Status = "Assigned"<br>2. Edit lead<br>3. Change Status to "Work In Progress"<br>4. Save<br>5. Verify Status updated<br>6. Update a field on lead (e.g., notes)<br>7. Save<br>8. Verify Status can progress through qualification<br>**Expected:** User should be able to manually change Status to "Work In Progress". No automation required. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#024 | Upload Documents During Qualification | Sales Coordinator | As a Sales Coordinator, I should be able to upload Scope of Work document and other documents with proper type tagging so that lead has complete supporting information. | System must allow uploading documents (<5MB). Sales Coordinator should upload multiple project documents. Supported types: PDF, Word, Excel, Images. For each: record Document Type, Description, Upload Date, Uploaded By. Checklist field tracks completion. Prevent submission without required docs. Lock documents after submission. | Create custom LWC component - reusable file uploader which captures type on content version. Use Custom metadata for object vs list of file types. Create checkboxes for each mandatory file. Formula field to check if all mandatory true. Prevent submission via validation. Lock modifications based on checkbox. | Sprint 1 | Soniya | **TS-016:** Upload documents with checklist validation before approval | **Steps:**<br>1. Create lead in "Work In Progress" status<br>2. Open Upload Documents component<br>3. View required documents checklist<br>4. Upload Document Type = "Scope of Work", file = scope.pdf<br>5. Verify "Scope of Work" checkbox auto-checks<br>6. Upload Document Type = "Trade License", file = license.pdf<br>7. Verify "Trade License" checkbox auto-checks<br>8. Check formula field "Is_Checklist_Complete__c"<br>9. If all mandatory uploaded, should = TRUE<br>10. Try to submit for approval without all docs<br>11. Verify validation error<br>12. Upload remaining mandatory docs<br>13. Submit for approval successfully<br>**Expected:** Each upload should update corresponding checkbox. Formula field should track completion. Validation should prevent approval submission without all mandatory docs. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#024 | Upload Documents During Qualification | Sales Coordinator | (cont.) | (cont.) | (cont.) | Sprint 1 | Soniya | **TS-017:** Document lock after approval submission | **Steps:**<br>1. Lead with all documents uploaded<br>2. Submit for approval<br>3. Verify lock checkbox/field set to TRUE<br>4. Try to upload new document<br>5. Observe upload button disabled or error message<br>6. Approver rejects and sends back<br>7. Verify lock released<br>8. Verify can upload documents again<br>**Expected:** Documents should lock after submission for approval. Should unlock if sent back for modification. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#025 | Pending Bid Manager Review | Sales Coordinator | As a sales coordinator, I want the leads sent for bid manager's approval to show as "Pending Bid Manager Review" so I can identify leads waiting for approval. | When lead's Status is "Work in Progress" and sent for BM approval, Status should auto-update to "Pending Bid Manager Review". | Covered above | Sprint 1 | Prajwal | **TS-018:** Status auto-update on approval submission | **Steps:**<br>1. Lead with Status = "Work in Progress"<br>2. Complete all validation requirements<br>3. Click "Submit for Approval" button<br>4. Observe Status field<br>5. Verify Status = "Pending Bid Manager Review"<br>6. Check approval process initiated<br>7. Check BM user has approval in their queue<br>**Expected:** Approval process should auto-update Status via field update action. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#026 | Pending General Manager Review | Sales Coordinator | As a sales coordinator, I want leads sent for GM approval to show as "Pending General Manager Review" so I can track approval stage. | When lead value/score is high and approved by BM, system routes to GM and Status updates to "Pending General Manager Review". | Use approval/rejection actions to update status and capture timestamp. Enable history tracking. | Sprint 1 | Prajwal | **TS-019:** Two-level approval flow status transitions | **Steps:**<br>1. Create lead with high qualification score OR high project value<br>2. Submit for approval<br>3. Verify Status = "Pending Bid Manager Review"<br>4. Login as Bid Manager<br>5. Approve lead<br>6. Verify Status auto-updates to "Pending General Manager Review"<br>7. Login as GM<br>8. See lead in approval queue<br>9. Verify lead details visible<br>**Expected:** Two-level approval should trigger based on threshold criteria. Status should update at each stage. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#027 | Approved | Bid Manager/GM | As a Bid Manager/General Manager, I want the lead's status to be marked as "Approved" after receiving all required approvals, so I have clear final status on qualified leads. | When final approver provides approval, lead status should auto-update to "Approved". | Use approval/rejection actions to update status and capture timestamp. Enable history tracking. | Sprint 1 | Prajwal | **TS-020:** Final approval sets Status to Approved | **Steps:**<br>1. Lead in "Pending General Manager Review"<br>2. Login as GM<br>3. Navigate to approval request<br>4. Review lead details<br>5. Click Approve<br>6. Add comments (optional)<br>7. Submit approval<br>8. Navigate to lead record<br>9. Verify Status = "Approved"<br>10. Check "Approved Date" field populated<br>11. Check "Approved By" field = GM<br>12. View Approval History<br>13. Verify complete approval trail<br>**Expected:** Status should update to "Approved". Timestamp and approver should be captured. Full audit trail should be visible. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#028 | Disqualified/Rejected | Bid Manager/GM | As a Bid Manager/General Manager, I want to be able to move a lead to "Disqualified/Rejected" status with a logged reason so I can provide feedback and keep pipeline clean. | When lead is rejected during approval, user should select rejection/disqualification reason (mandatory) and Status should update to "Disqualified/Rejected". | Use approval/rejection actions to update status. Enable history tracking. | Sprint 1 | Prajwal | **TS-021:** Reject lead with mandatory reason | **Steps:**<br>1. Lead in approval process<br>2. Login as approver (BM or GM)<br>3. Open approval request<br>4. Click Reject<br>5. Try to submit without selecting Rejection Reason<br>6. Observe validation error<br>7. Select Rejection Reason from picklist (e.g., "Not within our business Core")<br>8. Enter comments<br>9. Submit rejection<br>10. Verify Status = "Disqualified/Rejected"<br>11. Verify Rejection Reason field populated<br>12. Verify rejected date and rejected by captured<br>**Expected:** Rejection Reason should be mandatory. Status should update on rejection. All fields should be logged. |
| BRN#008 | Lead Management | Lead Lifecycle - Stages | EEIC & GCGE- All BUs | No | USR#030 | Converted | Sales Coordinator | As a sales coordinator, I should be able to convert approved lead to create Account, Contact, and Opportunity. | When SC initiates Convert action on approved lead, system should create Account (if new), Contact, Opportunity. Status can be updated to "Converted" manually. | Use approval/rejection actions. Enable history tracking. | Sprint 1 | Prajwal | **TS-022:** Convert approved lead to Account, Contact, Opportunity | **Steps:**<br>1. Lead with Status = "Approved"<br>2. All documents uploaded<br>3. Login as Sales Coordinator<br>4. Open lead record<br>5. Click "Convert" button (custom LWC component)<br>6. Wait for conversion process<br>7. Observe success message<br>8. Verify navigation to new Opportunity<br>9. Note Opportunity ID<br>10. Check Opportunity fields populated from lead<br>11. Navigate to Account<br>12. If new customer, verify new Account created<br>13. If existing, verify linked to existing account<br>14. Check Contact created<br>15. Verify all field mappings correct<br>16. Navigate back to Lead<br>17. Verify Status = "Converted"<br>18. Verify IsConverted = TRUE<br>**Expected:** Convert button should trigger CustomLeadConverter.convertLead(). Should create Account (if new)/Contact/Opportunity. Should handle existing account linking. Should navigate to Opportunity. Lead Status should update to Converted. |

---

*Table continues for all user stories... Due to size constraints, showing first 10 user stories in detail. The pattern continues for all 100+ user stories.*

---

## Sprint 2 - Selected Test Scenarios

| BRN | USR No | Title | Developer | Test Scenario | Test Steps |
|-----|--------|-------|-----------|---------------|------------|
| BRN#021 | USR#070 | Manual Account Creation | Prajwal | **TS-030:** Verify manual account creation restricted to admin only | **Steps:**<br>1. Login as Sales Coordinator<br>2. Navigate to Accounts<br>3. Verify "New" button not visible/disabled<br>4. Accounts should only be created via lead conversion<br>5. Login as Admin<br>6. Verify "New" button available<br>7. Create account manually<br>8. Fill mandatory fields: Company Name, TRN/VAT, Trade License Number/Expiry, Phone, Address, Country, Email<br>9. Save<br>**Expected:** Non-admin users cannot manually create accounts. Accounts are created via lead conversion process. |
| BRN#021 | USR#071 | Lead Conversion Account Creation | Prajwal | **TS-031:** Auto-create account on lead conversion for new customer | **Steps:**<br>1. Create lead with Existing Customer = "No"<br>2. Fill: Company, Phone, Email, Street, City, Country<br>3. Enter TRN/VAT, Trade License details<br>4. Approve lead<br>5. Convert lead<br>6. Check Account created<br>7. Verify all fields mapped from lead to account<br>8. Check Contact created<br>9. Check Opportunity created<br>**Expected:** New account should be auto-created with all details from lead. Contact and Opportunity should also be created. |
| BRN#021 | USR#071 | Duplicate Account Prevention | Prajwal | **TS-032:** Prevent duplicate account creation via duplicate rules | **Steps:**<br>1. Create Account: Name = "Existing Corp", TRN = "TRN123456", Trade License = "TL789"<br>2. Create Lead: Company = "Existing Corp", TRN = "TRN123456", Existing Customer = "No"<br>3. Try to convert lead<br>4. Observe duplicate alert/blocking<br>5. System should suggest existing account match<br>6. Change lead to Existing Customer = "Yes"<br>7. Link to existing account<br>8. Convert successfully<br>**Expected:** Duplicate matching rules should detect match on TRN+Trade License for Enterprise UAE, VAT for Government UAE. Should block or warn user. |
| BRN#029 | USR#086-089 | Trade License Expiry Tracking | Soniya | **TS-040:** Complete trade license expiry workflow | **Steps:**<br>1. Create Account: Trade License Expiry Date = Today + 30 days<br>2. Run TradeLicenseExpiryScheduler (or wait for scheduled run)<br>3. Verify email sent to account Email_Id__c<br>4. Verify bell notification sent to Account Owner<br>5. Wait until Today + 15 days<br>6. Run scheduler<br>7. Verify second reminder sent<br>8. Wait until expiry date + 31 days (threshold)<br>9. Run scheduler<br>10. Verify Trade_License_Expiry_Threshold_Reached__c = TRUE<br>11. Try to create Binding Quote<br>12. Verify blocked by validation<br>13. Update Trade License Expiry Date = Today + 365 days<br>14. Save<br>15. Run scheduler<br>16. Verify flag cleared (= FALSE)<br>17. Create Binding Quote successfully<br>**Expected:** Scheduler should send reminders at 30/15/5 days before and 1/15/30 days after expiry. Flag should set at threshold. Binding quotes should be blocked. Renewal should clear flag. |

---

## Sprint 3 - Selected Test Scenarios

| BRN | USR No | Title | Developer | Test Scenario | Test Steps |
|-----|--------|-------|-----------|---------------|------------|
| BRN#004 | USR#011 | Lead Unique Identifier Generation | Ayush | **TS-050:** Auto-generate unique Lead ID in correct format | **Steps:**<br>1. Create lead with Record Type = GCGE<br>2. Save<br>3. Check Lead_Unique_Id__c<br>4. Verify format: G-NNNN-DD.MM.YYYY (e.g., G-0001-13.10.2025)<br>5. Create lead with Record Type = EEIC<br>6. Check format: E-NNNN-DD.MM.YYYY or E1-NNNN-DD.MM.YYYY based on BU<br>7. Create multiple leads same day<br>8. Verify sequential numbering (0001, 0002, 0003...)<br>9. Create lead next day<br>10. Verify date portion updates<br>**Expected:** Flow should generate unique ID using count query at BU level. Format should match specification. Numbers should be sequential. Date should be creation date. |
| BRN#004 | USR#012 | Lead ID Persistence | Ayush | **TS-051:** Lead Unique ID carries to all related objects | **Steps:**<br>1. Create and note Lead Unique ID = "E1-0042-13.10.2025"<br>2. Convert lead to Opportunity<br>3. Open Opportunity<br>4. Check Lead_Unique_ID__c formula field displays same ID<br>5. Create Quote from Opportunity<br>6. Verify formula field on Quote shows same ID<br>7. Check MPR object (when created)<br>8. Check Order object (when created)<br>9. Verify ID consistent across all objects<br>**Expected:** Lead Unique ID should be available via formula fields referencing opportunity lookup → lead unique ID across Quote, MPR, Order, Invoice. |
| FBSP1BRN#014 | USR#053 | Lead Approval Process | Soniya | **TS-055:** Two-level approval process with GM final decision | **Steps:**<br>1. Configure Approval Process with 2 steps: BM → GM<br>2. Create lead<br>3. Submit for approval<br>4. Login as BM<br>5. Reject with reason<br>6. Verify still routes to GM<br>7. Login as GM<br>8. See BM rejection reason visible<br>9. GM can still Approve or Reject<br>10. GM Approves<br>11. Verify lead Status = "Approved"<br>12. Test second scenario: GM rejects<br>13. Verify lead Status = "Disqualified"<br>14. Verify only GM can disqualify (BM rejection still needs GM review)<br>**Expected:** All leads require GM final decision. BM rejection should route to GM. GM has final authority to approve or disqualify. |
| FBSP1BRN#016-USR#060 | - | Customer Type Based Document Requirements | Soniya | **TS-060:** Validate document requirements for different customer types (UAE) | **Steps:**<br>**Scenario 1: UAE Private Company**<br>1. Lead from UAE, Customer Type = "Private Companies", Value > 3000 AED<br>2. Try to convert<br>3. Verify requires: Trade License, VAT Certificate, KYC Form for AML<br>4. Upload documents<br>5. Convert successfully<br><br>**Scenario 2: UAE Government**<br>1. Lead from UAE, Customer Type = "UAE government"<br>2. Convert without any documents<br>3. Verify successful (no docs required)<br><br>**Scenario 3: UAE Govt Related**<br>1. Customer Type = "Government Related Companies"<br>2. Verify VAT Certificate mandatory, Trade License not required<br><br>**Scenario 4: Group Companies**<br>1. Customer Type = "Group Companies"<br>2. Convert without documents<br>3. Verify successful<br>**Expected:** Document Rule Evaluator should check metadata configuration. Should enforce correct documents per customer type + country classification. |
| FBSP1BRN#08 | - | Sensitive Country Approval Stage | Soniya | **TS-065:** Sensitive country requires additional approval before conversion | **Steps:**<br>1. Create Country record: Name = "Iran", Sensitive_Country__c = "Yes"<br>2. Create lead<br>3. Select Country lookup = Iran<br>4. Verify formula field Is_Sensitive__c = TRUE (or similar)<br>5. Try to submit for normal approval<br>6. Verify requires "Sensitive Country Approved" stage first<br>7. Submit for sensitive country approval<br>8. Credit Control Team approves AML check<br>9. Verify stage complete<br>10. Now can submit for BM/GM approval<br>11. Complete approvals<br>12. Convert lead<br>13. Verify Account marked with sensitive country flag<br>14. Verify AML approval tracked<br>**Expected:** Sensitive countries should require additional approval layer. Should be tracked on Account for compliance. |

---

## Sprint 4 - Selected Test Scenarios (Planned/In Progress)

| BRN | USR No | Title | Developer | Test Scenario | Test Steps |
|-----|--------|-------|-----------|---------------|------------|
| BRN#026 | - | Account Score Calculation | Soniya/Prajwal | **TS-080:** Calculate account score based on payment history and credit worthiness | **Steps:**<br>1. Create account as Existing Customer with ERP_ID__c populated<br>2. Sync 12 months invoice data from ERP<br>3. Enter manual fields: # disputes, # escalations<br>4. Credit team uploads: Bank Letter, Trade References, Financial Statements, Bank Statements<br>5. Credit team evaluates each parameter (1-5 score)<br>6. Click "Calculate Account Score" button<br>7. Verify Payment History Score calculated using weighted average<br>8. Verify Credit Worthiness Score calculated<br>9. Verify Final Account Score = average of both<br>10. Verify Risk Level assigned based on score matrix<br>11. Check audit log created<br>**Expected:** Should calculate using metadata matrix for weightages. Should store in Payment History Analysis object for history. Should lock score until next assessment date. |

---

## Negative Test Scenarios

| Test ID | Scenario | Test Steps | Expected Result |
|---------|----------|------------|-----------------|
| NEG-001 | Create lead without mandatory fields | Fill only Company Name, try to save | Should show error listing all missing mandatory fields |
| NEG-002 | Upload oversized file | Try to upload file >5MB | Should show error: "File exceeds maximum size limit" |
| NEG-003 | Convert lead without approval | Lead Status = "Work in Progress", click Convert | Should show error: "Lead must be approved before conversion" |
| NEG-004 | Submit for approval without documents | Missing mandatory documents, click Submit | Should show validation error with document checklist |
| NEG-005 | Create account with duplicate VAT | Account with VAT exists, create lead with same VAT as new customer | Should show duplicate warning/error |
| NEG-006 | Close opportunity as Won without PO Date | Change stage to Closed Won, leave PO Date blank | Validation rule should prevent: "PO Date is mandatory for Closed Won" |
| NEG-007 | Upload to locked record | Lead submitted for approval (locked), try to upload document | Upload button should be disabled or show error |
| NEG-008 | Change status without required documents | Lead in "Work in Progress" with doc rule, change status without uploading | Should show error from DocumentValidationHelper |
| NEG-009 | Inactive user in Business Unit Mapping | Rule has Vertical_Head__c = inactive user, create lead | Should handle gracefully (don't assign inactive user or show error) |
| NEG-010 | Create location in different country than account | Account has location from UAE, try to create location from India | Should block: "Account already has locations from [Country]" |

---

## Performance Test Scenarios

| Test ID | Scenario | Test Steps | Expected Result |
|---------|----------|------------|-----------------|
| PERF-001 | Bulk lead insert | Insert 200 leads via Data Loader | Should complete within reasonable time. Triggers should handle bulk. |
| PERF-002 | Batch job execution | Update Business Unit Mapping Rule affecting 500+ leads | ReevaluateLeadsBatch should process all leads without hitting governor limits |
| PERF-003 | Document upload on lead with many rules | Upload document on lead with 10+ applicable document rules | updateChecklistFlag should complete without timeout |
| PERF-004 | Opportunity team member assignment | Create 50 opportunities matching team member rule | Should auto-assign all team members without errors |
| PERF-005 | Scheduler with large dataset | 1000 accounts with varying expiry dates, run TradeLicenseExpiryScheduler | Should process all accounts. Should not hit email limits (use batch if needed). |

---

## Regression Test Scenarios

After each deployment, execute these critical path tests:

1. **REG-001:** Create Lead → Assign → Upload Docs → Approve → Convert
2. **REG-002:** Create Opportunity → Auto-assign Team Members → Progress through stages → Close Won
3. **REG-003:** Create Account → Complete Onboarding → Track Trade License Expiry
4. **REG-004:** Test all triggers fire correctly (Lead, Opportunity, ContentDocumentLink, Business Unit Mapping)
5. **REG-005:** Verify all LWC components render and function (upload, convert, wizard)
6. **REG-006:** Run all Apex test classes and verify >75% coverage
7. **REG-007:** Test approval processes (Lead and Account onboarding)
8. **REG-008:** Verify reports accessible and data accurate
9. **REG-009:** Test notifications (email and bell) working
10. **REG-010:** Validate security and permissions still enforced

---

## Test Execution Report Template

### Test Execution Summary

| Module | Total Test Cases | Passed | Failed | Blocked | Not Run | Pass % |
|--------|------------------|--------|--------|---------|---------|--------|
| Lead Management | 45 | - | - | - | - | - |
| Opportunity Management | 25 | - | - | - | - | - |
| Account Management | 20 | - | - | - | - | - |
| Contact Management | 6 | - | - | - | - | - |
| Site Management | 8 | - | - | - | - | - |
| Integrations | 5 | - | - | - | - | - |
| **TOTAL** | **109** | - | - | - | - | - |

### Defects Summary

| Defect ID | Module | Severity | Description | Status |
|-----------|--------|----------|-------------|--------|
| - | - | - | - | - |

### Notes
- Test Environment: [Sandbox Name]
- Test Execution Date: [Date]
- Tested By: [Name]
- Browser: [Chrome/Edge/Safari + Version]
- Salesforce API Version: 64.0

---

**End of Test Scenarios Document**

